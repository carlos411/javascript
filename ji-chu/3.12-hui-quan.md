# 3.12 迴圈(Loop)

在 `javascript/practice` 資料夾下，建立 `loop.html` 檔案，以便練習。

## for 迴圈

### 範例 1：基本形式

```javascript
for(var i = 0; i < 3; i++){
  console.log("迴圈：" + i);
}
console.log("結束迴圈，i 的值：" + i);
```

執行以下步驟：

1. 執行 `var i = 0`。
2. 執行 `i < 3` 去判斷是 true 或 false。
3. 如果是 true，就執行 for 迴圈裡的程式(此例是第2行)。
4. 如果是 false，就結束整個 for 迴圈，然後繼續執行以下的程式(此例是第 4 行)。
5. 執行 `i++`，此時 i 變成了 1，然後回到步驟 2 繼續執行。



### 範例 2：var 與 let

```javascript
for(let i = 0; i < 10; i++){
  console.log("迴圈：" + i);
}
console.log("結束迴圈，i 的值：" + i);
console.log("因為上一行出錯，js 被中斷執行了，所以不會在 console 中印出。");
```

錯誤訊息如下圖：

![](../.gitbook/assets/var\_let\_in\_for.png)

{% hint style="info" %}
因為 i 的可視範圍(scope)是區塊(Block)，也就是用大括號包含來的區域，所以此例來說，i 只存在於 for 迴圈之中。
{% endhint %}

{% hint style="info" %}
JS 因為在第 4 行的地方出錯，造成了後面的程式碼被中斷了。
{% endhint %}



### 範例 3：break

遇到 break，直接結束整個 for 迴圈：

```javascript
for(var i = 0; i < 10; i++){
  if(i == 3){
    console.log("迴圈：" + i);
    break;
  }
  console.log("迴圈：" + i);
}
console.log("結束迴圈，i 的值：" + i);

/*
迴圈：0
迴圈：1
迴圈：2
迴圈：3
結束迴圈，i 的值：3
*/
```



### 範例 4：continue

遇到 continue，結束當次的 for 迴圈，繼續執行下一次的迴圈。

```javascript
for(var i = 0; i < 10; i++){
  if(i == 3){
    continue;
  }
  console.log("迴圈：" + i);
}
console.log("結束迴圈，i 的值：" + i);

/*
迴圈：0
迴圈：1
迴圈：2
迴圈：4
迴圈：5
迴圈：6
迴圈：7
迴圈：8
迴圈：9
結束迴圈，i 的值：10
*/
```



### 範例 5：第一個敘述多個初始值

```javascript
for(var i = 0,j = 0; i < 10; i++){
  console.log("迴圈：i 值 " + i + "；j 值 " + j);
}
console.log("結束迴圈，i 的值：" + i + "；j 的值 " + j);

/*
迴圈：i 值 0；j 值 0
迴圈：i 值 1；j 值 0
迴圈：i 值 2；j 值 0
迴圈：i 值 3；j 值 0
迴圈：i 值 4；j 值 0
迴圈：i 值 5；j 值 0
迴圈：i 值 6；j 值 0
迴圈：i 值 7；j 值 0
迴圈：i 值 8；j 值 0
迴圈：i 值 9；j 值 0
結束迴圈，i 的值：10；j 的值 0
*/
```



### 範例 6：關於省略(參考)

第一個敘述省略：

```javascript
var i = 0
for(; i < 10; i++){
  console.log("迴圈：i 值 " + i);
}
console.log("結束迴圈，i 的值：" + i);

/*
迴圈：i 值 0
迴圈：i 值 1
迴圈：i 值 2
迴圈：i 值 3
迴圈：i 值 4
迴圈：i 值 5
迴圈：i 值 6
迴圈：i 值 7
迴圈：i 值 8
迴圈：i 值 9
結束迴圈，i 的值：10
*/
```

第二個敘述省略(要留意何時離開整個 for 迴圈)：

```javascript
var i = 0
for(;; i++){
  if(i == 2){
    break;
  }
  console.log("迴圈：i 值 " + i);
}
console.log("結束迴圈，i 的值：" + i);

/*
迴圈：i 值 0
迴圈：i 值 1
結束迴圈，i 的值：2
*/
```

第三個敘述省略(留意 i++ 放到裡面了)：

```javascript
var i = 0
for(;;){
  if(i == 3){
    break;
  }
  i++;
  console.log("迴圈：i 值 " + i);
}
console.log("結束迴圈，i 的值：" + i);

/*
迴圈：i 值 1
迴圈：i 值 2
迴圈：i 值 3
結束迴圈，i 的值：3
*/
```

{% hint style="danger" %}
儘量不要用這些省略的語法，維持一個正常的寫法即可。
{% endhint %}



### 範例 7：無窮迴圈(要避免此狀況)

```javascript
for(var i = 0; i < 10; i--){
  console.log("迴圈：" + i);
}
console.log("結束迴圈，i 的值：" + i);
```

{% hint style="warning" %}
瀏覽器是會當掉的……所以在寫任何的迴圈時，都要留意何時離開迴圈。
{% endhint %}



## for...of 迴圈：取值

陣例格式：

```javascript
var cars = ['BMW', 'Volvo', 'Mini']; // 中括號包起來就是陣列格式
var car;
for (car of cars) {
  console.log(car);
}

/*
BMW
Volvo
Mini
*/
```

字串格式：

```javascript
var text_string = "JavaScript";
var each_character;
for (each_character of text_string) {
  console.log(each_character);
}

/*
J
a
v
a
S
c
r
i
p
t
*/
```





## for...in 迴圈：取 key

物件格式：

```javascript
var person = {
  fname: "John",
  lname: "Doe",
  age: 18
}; // 大括號包起來，就是物件格式

for (key in person) {
  console.log(key + "：" + person[key]);
}

/*
fname：John
lname：Doe
age：18
*/
```



## while 迴圈

### 範例 1：基本形式

```javascript
var a = 0;
while(a < 10){
  console.log("迴圈 " + a);
  a++;
}
console.log("結束迴圈，a 的值：" + a);

/*
迴圈 0
迴圈 1
迴圈 2
迴圈 3
迴圈 4
迴圈 5
迴圈 6
迴圈 7
迴圈 8
迴圈 9
結束迴圈，a 的值：10
*/
```

執行以下步驟：

1. 執行第一行，然後下一行進入 while 迴圈。
2. 判斷 `a < 10` 是 true 或 false。
3. 如果是 true，就執行 while 迴圈裡的程式(此例是第 3 行及第 4 行)。
4. 如果是 false，就結束整個 while 迴圈。然後繼續執行其它程式(此例是第 6 行)。
5. 接續上述第 3 步，執行完裡面的程式之後，會回到步驟 2 繼續執行。

{% hint style="info" %}
將第 1 行 a 的值改成 11 呢？
{% endhint %}



### 範例 2：無窮迴圈(要避免此狀況)



```javascript
var a = 0;
while(a < 10){
  console.log("迴圈 " + a);
}
console.log("結束迴圈，a 的值：" + a);
```

{% hint style="danger" %}
此程式碼在進入 while 迴圈之後，變數 a 的值一直都是 0，則 a < 10 的判斷永遠都是 true，會造成無窮迴圈一直在跑 while 迴圈裡的程式，以致於瀏覽器當機。
{% endhint %}



## do...while 迴圈

###

### 範例 1：基本形式

```javascript
var a = 0;
do{
  console.log("迴圈 " + a);
  a++;
}while(a < 10);
console.log("結束迴圈，a 的值：" + a);

/*
迴圈 0
迴圈 1
迴圈 2
迴圈 3
迴圈 4
迴圈 5
迴圈 6
迴圈 7
迴圈 8
迴圈 9
結束迴圈，a 的值：10
*/
```

執行以下步驟：

1. 執行第一行，然後下一行進入 do...while 迴圈。
2. 執行 do 裡面的程式，直到最後一行 `a++`。
3. 判斷 `a < 10` 是 true 或 false。
4. 如果是 true，就回到步驟 2 繼續執行。
5. 如果是 false，就結束整個 do...while 迴圈，然後繼續執行以下的程式(此例是第 6 行)。



{% hint style="info" %}
將第 1 行 a 的值改成 11 呢？\
與 while 迴圈主要差在哪裡？
{% endhint %}



## 練習：九九乘法表

分別用 for 迴圈及 while 迴圈，撰寫九九乘法表。在 console 中，如下輸出(顯示部份)：

```javascript
/*

1 x 1 = 1
1 x 2 = 2
1 x 3 = 3
1 x 4 = 4
1 x 5 = 5
1 x 6 = 6
1 x 7 = 7
...
2 x 1 = 2
2 x 2 = 4
2 x 3 = 6
...
9 x 9 = 81

*/
```



參考作法：

for 迴圈寫法：

{% embed url="https://codepen.io/carlos411/pen/GRowMXg" %}



while 迴圈寫法：

{% embed url="https://codepen.io/carlos411/pen/rNxQGRK" %}

